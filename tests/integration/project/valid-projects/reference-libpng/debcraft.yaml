name: libpng1.6
version: 1.6.43-5build1
summary: PNG library - runtime (version 1.6)
description: |
   libpng is a library implementing an interface for reading and writing
   PNG (Portable Network Graphics) format files.

   This package contains the runtime library files needed to run software
   using libpng.
base: ubuntu@24.04
maintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>
original-maintainer: Maintainers of libpng1.6 packages <libpng1.6@packages.debian.org>

section: libs

# to be removed, see https://github.com/canonical/debcraft/issues/52
platforms:
  amd64:

packages:
  libpng16-16t64:
    provides:
      - libpng16-16
    breaks:
      - libpng16-16 (<< 1.6.43-5build1)
    replaces:
      - libpng16-16

  libpng-dev:
    section: libdevel
    summary: PNG library - development (version 1.6)
    description: |
      libpng is a library implementing an interface for reading and writing
      PNG (Portable Network Graphics) format files.

      This package contains the header and development files needed to build
      programs and packages using libpng.

  libpng-tools:
    section: libdevel
    summary: PNG library - tools (version 1.6)
    description: |
      libpng is a library implementing an interface for reading and writing
      PNG (Portable Network Graphics) format files.

      This package contains a program to interact with libpng from the
      command line.

parts:
  libpng1.6:
    plugin: autotools
    autotools-configure-parameters:
      - --prefix=/usr
    source: .
    build-packages:
      - build-essential
      - zlib1g-dev
    organize:
      usr/bin/libpng-config: (package/libpng-dev)/usr/bin/
      usr/bin/libpng16-config: (package/libpng-dev)/usr/bin/
      usr/include: (package/libpng-dev)/usr
      usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/pkgconfig: (package/libpng-dev)/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/
      usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/*.a: (package/libpng-dev)/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/
      usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/*.so: (package/libpng-dev)/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/
      usr/share/doc/libpng-16: (package/libpng-dev)/usr/share/doc/
      usr/share/man: (package/libpng-dev)/usr/share/
      usr/bin/png-fix-itxt: (package/libpng-tools)/usr/bin/
      usr/bin/pngfix: (package/libpng-tools)/usr/bin/

